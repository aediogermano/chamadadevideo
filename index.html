<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carol - Chamada de Vídeo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet" />

  <!-- FACEBOOK PIXEL -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');

    fbq('init', '1279775006873413');

    setTimeout(() => {
      if (typeof fbq === 'function') {
        fbq('track', 'PageView');

        if (!localStorage.getItem('purchase_tracked')) {
          fbq('track', 'Purchase', {value: 20.00, currency: 'BRL'});
          localStorage.setItem('purchase_tracked', 'true');
        }
      }
    }, 1500);
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1279775006873413&ev=PageView&noscript=1"
  /></noscript>

  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #000;
      color: #fff;
    }

    body.modal-open iframe {
      pointer-events: none;
    }

    .watermark {
      pointer-events: none;
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      color: rgba(255,255,255,0.06);
      font-weight: 800;
      font-size: 3rem;
      text-align: center;
      user-select: none;
    }

    .pix-cta {
      animation: bounce 1.5s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    .pix-notify {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #00c851;
      color: white;
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: bold;
      box-shadow: 0 0 12px rgba(0,0,0,0.4);
      z-index: 9999;
      animation: slideIn 0.6s ease forwards;
    }

    @keyframes slideIn {
      0% { opacity: 0; transform: translateY(30px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @media (min-width: 768px) {
      #pixCta {
        font-size: 0.875rem;
        padding: 6px 12px;
        max-width: 260px;
      }

      #chat {
        max-height: 200px;
      }
    }

    @media (max-width: 767px) {
      #pixCta {
        font-size: 0.75rem;
        padding: 6px 10px;
        max-width: 220px;
      }

      #chat {
        max-height: 120px;
      }
    }
  </style>
</head>
<body class="modal-open">

<!-- MODAL INICIAL -->
<div id="modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-6">
  <div class="max-w-sm w-full bg-white/5 rounded-xl p-6 border border-white/10">
    <h1 class="text-2xl font-bold mb-2">AO VIVO AGORA —<br>Chamada com Carol</h1>
    <p class="text-white/80 text-sm mb-4">Goze ao vivo comigo amor.</p>
    <label class="flex items-center gap-2 text-sm mb-4">
      <input id="consent" type="checkbox" class="accent-pink-500" />
      Quero Gozar.
    </label>
    <div class="flex gap-3">
      <button id="enterDemo" class="flex-1 bg-pink-600 text-white py-3 rounded-xl font-semibold ring-2 ring-pink-500 pisca-hardcore">🔥 ENTRAR AO VIVO 🔥</button>
      <button id="leave" class="px-4 py-3 border border-white/20 rounded-xl hover:bg-white/10">Sair</button>
    </div>
  </div>
</div>

<!-- CONTEÚDO PRINCIPAL -->
<main class="w-screen h-screen overflow-hidden relative">
  <!-- Vídeo em tela cheia -->
  <div class="absolute inset-0 z-0">
    <div class="absolute inset-0 watermark">Carol • AO VIVO</div>
    <iframe
      id="vimeoPlayer"
      src="https://player.vimeo.com/video/1126429563?autoplay=1&muted=1&autopause=0&background=1&title=0&byline=0&portrait=0&controls=0"
      class="w-full h-full"
      allow="autoplay; fullscreen"
      allowfullscreen
    ></iframe>
  </div>

  <!-- Camada interativa -->
  <div class="relative z-10 flex flex-col justify-between h-full">

    <!-- TOPO: Botões principais + Pix -->
    <div class="flex flex-col items-center gap-2 pt-4 px-4">
      <div class="flex flex-wrap justify-center gap-2">
        <button id="toggleMute" class="bg-white/10 text-sm px-4 py-2 rounded-lg">Desmutar</button>
        <button id="startCam" class="bg-pink-500 text-sm px-4 py-2 rounded-lg">Ligar câmera</button>
        <button id="endCall" class="bg-red-600 text-sm px-4 py-2 rounded-lg">Encerrar</button>
      </div>
      <div id="pixCta" class="bg-pink-600 text-white rounded-lg text-center font-semibold shadow-lg pix-cta mt-2 cursor-pointer">
        💸 Pix: <b>16231054713</b>
      </div>
    </div>

    <!-- FUNDO: Chat -->
    <div class="px-3 pb-3 space-y-2">
      <div id="chat" class="bg-white/10 rounded-lg p-3 space-y-2 text-sm text-white/90 overflow-y-auto h-28"></div>
      <div class="flex gap-2">
        <input id="chatInput" type="text" placeholder="Digite algo..."
          class="flex-1 px-3 py-2 rounded-lg bg-white/10 text-white placeholder-white/50 text-sm" />
        <button id="chatSend" class="bg-pink-600 px-4 py-2 rounded-lg text-sm font-bold">Enviar</button>
      </div>
    </div>

  </div>
</main>

<!-- SCRIPTS -->
<script src="https://player.vimeo.com/api/player.js"></script>
<script>
  const modal = document.getElementById('modal');
  const consent = document.getElementById('consent');
  const chatBox = document.getElementById('chat');
  const chatInput = document.getElementById('chatInput');
  const chatSend = document.getElementById('chatSend');

  document.getElementById('enterDemo').addEventListener('click', () => {
    if (!consent.checked) {
      alert('Marque Quero Gozar Para Prosseguir.');
      return;
    }

    modal.style.display = 'none';
    document.body.classList.remove('modal-open');

    setTimeout(() => {
      const player = new Vimeo.Player(document.getElementById('vimeoPlayer'));
      player.setVolume(1);
      player.play();
    }, 300);

    setTimeout(() => pushMsg('Oi amor, tava te esperando... 😘'), 1000);
    setTimeout(() => pushMsg('Já liguei a câmera só pra você... 👀'), 2000);
    setTimeout(() => pushMsg('Não demora pra mostrar o que tem aí não... 😈'), 3000);
  });

  document.getElementById('leave').addEventListener('click', () => {
    alert('Chamada encerrada.');
  });

  document.getElementById('toggleMute').addEventListener('click', () => {
    const player = new Vimeo.Player(document.getElementById('vimeoPlayer'));
    player.getVolume().then(v => player.setVolume(v > 0 ? 0 : 1));
  });

  document.getElementById('startCam').addEventListener('click', () => {
    alert('Seu dispositivo não suporta esta funcionalidade.');
  });

  document.getElementById('endCall').addEventListener('click', () => {
    alert('Chamada encerrada.');
  });

  document.getElementById('pixCta').addEventListener('click', () => {
    const fireworks = [
      '✨ AAAAAAIIII BB 🔥🔥🔥',
      '😱 Cê fez ela arrepiar viu...',
      '💋 Ela tá rebolando SÓ pra você agora!',
      '🎁 Mais 1 Pix e ela sobe na mesa heim 🤑'
    ];
    fireworks.forEach((msg, i) => {
      setTimeout(() => pushMsg(msg), i * 1200);
    });
    fakeNotification();
  });

  chatSend.addEventListener('click', () => {
    const msg = chatInput.value.trim();
    if (!msg) return;
    pushMsg(msg, true);
    chatInput.value = '';
  });

  chatInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') chatSend.click();
  });

  function pushMsg(msg, isUser = false) {
    const el = document.createElement('div');
    el.textContent = msg;
    el.className = 'px-3 py-2 rounded-lg max-w-[80%] ' + (isUser ? 'bg-pink-600 ml-auto' : 'bg-white/10');
    chatBox.appendChild(el);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  function fakeNotification() {
    const div = document.createElement('div');
    div.className = 'pix-notify';
    div.textContent = '✅ Pix recebido: R$ 20,00';
    document.body.appendChild(div);
    setTimeout(() => div.remove(), 4000);
  }
</script>
</body>
</html>
